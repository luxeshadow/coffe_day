import{r as d,c as o,a as s,d as v,y as S,F as A,l as x,z as l,E as D,t as a,G as k,H as G,Q as N,n as y,o as r}from"#entry";import{_ as j}from"./DlAUqK2U.js";const E={class:"roles-page"},B={class:"table-container"},L={class:"roles-table"},P={key:0,class:"more-permissions"},q={class:"actions"},z=["onClick"],$=["onClick"],H={key:0,class:"empty-state"},O={class:"modal-header"},Q={class:"form-group"},_={class:"form-group"},h={class:"form-group"},J={class:"permissions-grid"},K=["value"],W={class:"form-group"},X={class:"status-toggle"},Y={class:"status-label"},Z={class:"modal-actions"},ss=["disabled"],es={class:"modal-content"},ts={__name:"user-grade",setup(ls){const f=d(!1),C=d(!1),c=d(!1),p=d(null),i=d({id:null,name:"",description:"",permissions:[],status:"active"}),u=d([{id:1,name:"Administrateur",description:"Accès complet à toutes les fonctionnalités",permissions:["users.read","users.write","roles.manage","settings.manage"],createdAt:"2024-01-15",status:"active"},{id:2,name:"Modérateur",description:"Gestion des utilisateurs et contenu",permissions:["users.read","content.moderate"],createdAt:"2024-01-20",status:"active"},{id:3,name:"Utilisateur",description:"Accès basique à la plateforme",permissions:["profile.manage"],createdAt:"2024-02-01",status:"active"}]),R=d([{id:"users.read",name:"Lecture utilisateurs"},{id:"users.write",name:"Écriture utilisateurs"},{id:"roles.manage",name:"Gestion des rôles"},{id:"settings.manage",name:"Gestion des paramètres"},{id:"content.moderate",name:"Modération du contenu"},{id:"profile.manage",name:"Gestion du profil"}]),M=()=>{w(),c.value=!1,f.value=!0},V=n=>{i.value={id:n.id,name:n.name,description:n.description,permissions:[...n.permissions],status:n.status},c.value=!0,f.value=!0},w=()=>{i.value={id:null,name:"",description:"",permissions:[],status:"active"}},b=()=>{f.value=!1,setTimeout(w,300)},F=()=>{if(c.value){const n=u.value.findIndex(e=>e.id===i.value.id);n!==-1&&(u.value[n]={...i.value})}else{const n={id:Math.max(...u.value.map(e=>e.id))+1,...i.value,createdAt:new Date().toISOString().split("T")[0]};u.value.push(n)}b()},I=n=>{p.value=n,C.value=!0},g=()=>{C.value=!1,p.value=null},T=()=>{p.value&&(u.value=u.value.filter(n=>n.id!==p.value.id),g())},U=n=>new Date(n).toLocaleDateString("fr-FR");return(n,e)=>(r(),o("div",E,[s("div",{class:"page-header"},[e[7]||(e[7]=s("h2",null,"Gestion des Rôles",-1)),s("button",{class:"btn-add",onClick:M},[...e[6]||(e[6]=[s("i",{class:"fas fa-plus"},null,-1),v(" Ajouter un rôle ",-1)])])]),s("div",B,[s("table",L,[e[10]||(e[10]=s("thead",null,[s("tr",null,[s("th",null,"ID"),s("th",null,"Nom du rôle"),s("th",null,"Description"),s("th",null,"Permissions"),s("th",null,"Date de création"),s("th",null,"Statut"),s("th",null,"Actions")])],-1)),s("tbody",null,[(r(!0),o(A,null,x(l(u),t=>(r(),o("tr",{key:t.id},[s("td",null,a(t.id),1),s("td",null,a(t.name),1),s("td",null,a(t.description),1),s("td",null,[(r(!0),o(A,null,x(t.permissions.slice(0,2),m=>(r(),o("span",{class:"permission-badge",key:m},a(m),1))),128)),t.permissions.length>2?(r(),o("span",P," +"+a(t.permissions.length-2)+" autres ",1)):S("",!0)]),s("td",null,a(U(t.createdAt)),1),s("td",null,[s("span",{class:y(["status-badge",t.status])},a(t.status==="active"?"Actif":"Inactif"),3)]),s("td",q,[s("button",{class:"btn-edit",onClick:m=>V(t),title:"Modifier"},[...e[8]||(e[8]=[s("i",{class:"fas fa-edit"},null,-1)])],8,z),s("button",{class:"btn-delete",onClick:m=>I(t),title:"Supprimer"},[...e[9]||(e[9]=[s("i",{class:"fas fa-trash"},null,-1)])],8,$)])]))),128))])]),l(u).length===0?(r(),o("div",H,[e[12]||(e[12]=s("i",{class:"fas fa-users-cog"},null,-1)),e[13]||(e[13]=s("p",null,"Aucun rôle n'a été créé pour le moment",-1)),s("button",{class:"btn-add",onClick:M},[...e[11]||(e[11]=[s("i",{class:"fas fa-plus"},null,-1),v(" Ajouter votre premier rôle ",-1)])])])):S("",!0)]),s("div",{class:y(["modal-overlay",{active:l(f)}]),onClick:b},[s("div",{class:"modal",onClick:e[4]||(e[4]=D(()=>{},["stop"]))},[s("div",O,[s("h3",null,a(l(c)?"Modifier le rôle":"Ajouter un nouveau rôle"),1),s("button",{class:"btn-close",onClick:b},[...e[14]||(e[14]=[s("i",{class:"fas fa-times"},null,-1)])])]),s("form",{onSubmit:D(F,["prevent"]),class:"modal-form"},[s("div",Q,[e[15]||(e[15]=s("label",{for:"roleName"},"Nom du rôle *",-1)),k(s("input",{id:"roleName","onUpdate:modelValue":e[0]||(e[0]=t=>l(i).name=t),type:"text",required:"",placeholder:"Ex: Administrateur"},null,512),[[G,l(i).name]])]),s("div",_,[e[16]||(e[16]=s("label",{for:"roleDescription"},"Description",-1)),k(s("textarea",{id:"roleDescription","onUpdate:modelValue":e[1]||(e[1]=t=>l(i).description=t),placeholder:"Description du rôle...",rows:"3"},null,512),[[G,l(i).description]])]),s("div",h,[e[18]||(e[18]=s("label",null,"Permissions",-1)),s("div",J,[(r(!0),o(A,null,x(l(R),t=>(r(),o("label",{key:t.id,class:"permission-checkbox"},[k(s("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":e[2]||(e[2]=m=>l(i).permissions=m)},null,8,K),[[N,l(i).permissions]]),e[17]||(e[17]=s("span",{class:"checkmark"},null,-1)),v(" "+a(t.name),1)]))),128))])]),s("div",W,[s("label",X,[k(s("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=t=>l(i).status=t),"true-value":"active","false-value":"inactive"},null,512),[[N,l(i).status]]),e[19]||(e[19]=s("span",{class:"slider"},null,-1)),s("span",Y,a(l(i).status==="active"?"Rôle actif":"Rôle inactif"),1)])]),s("div",Z,[s("button",{type:"button",class:"btn-cancel",onClick:b}," Annuler "),s("button",{type:"submit",class:"btn-submit",disabled:!l(i).name},a(l(c)?"Modifier":"Ajouter"),9,ss)])],32)])],2),s("div",{class:y(["modal-overlay",{active:l(C)}]),onClick:g},[s("div",{class:"modal delete-modal",onClick:e[5]||(e[5]=D(()=>{},["stop"]))},[s("div",{class:"modal-header"},[e[21]||(e[21]=s("h3",null,"Confirmer la suppression",-1)),s("button",{class:"btn-close",onClick:g},[...e[20]||(e[20]=[s("i",{class:"fas fa-times"},null,-1)])])]),s("div",es,[e[24]||(e[24]=s("i",{class:"fas fa-exclamation-triangle warning-icon"},null,-1)),s("p",null,[e[22]||(e[22]=v("Êtes-vous sûr de vouloir supprimer le rôle ",-1)),s("strong",null,'"'+a(l(p)?.name)+'"',1),e[23]||(e[23]=v(" ?",-1))]),e[25]||(e[25]=s("p",{class:"warning-text"},"Cette action est irréversible.",-1))]),s("div",{class:"modal-actions"},[s("button",{class:"btn-cancel",onClick:g}," Annuler "),s("button",{class:"btn-delete-confirm",onClick:T}," Supprimer ")])])],2)]))}},as=j(ts,[["__scopeId","data-v-83571d39"]]);export{as as default};
